# Law-Test-Randomizer Application Audit (2025-11-05)

- **Overall Score:** 45 / 100
- **Reviewer:** Codex (GPT-5)  
- **Scope:** SvelteKit frontend, API proxy routes, lib utilities, data migrations, automated tests.

## Snapshot
- **Notable strengths**
  - Core teacher/student/reviewer flows are implemented end-to-end with previews, assignment, grading, and reviewing supported in the UI (`src/routes/+page.svelte:1`).
  - Client-side validation helpers reduce accidental bad input and are covered by unit tests (`src/lib/api.js:8`, `src/lib/api.spec.js:1`).
  - Server-backed sessions with http-only cookies and login rate limiting reduce credential exposure compared to the previous localStorage model (`src/lib/server/session.js:1`, `src/routes/api/auth/login/+server.js:1`, `src/lib/server/loginRateLimit.js:1`).
  - Unit test suite runs quickly and passes (`npm run test:unit -- --run`).
- **Top risks**
  - Server routes previously built SQL through manual string interpolation, leaving room for injection if validation ever slipped (`src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`). Parameter binding now spans the helper and all high-risk routes, including uploads, signup, attempt answer retrieval, and grading (`src/lib/server/db.js:1`, `src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`). Continue auditing remaining admin/reporting SQL for similar hardening.
  - Session adoption is incomplete: most protected endpoints still trust `teacherId` provided in request bodies instead of deriving identity from the authenticated session, enabling privilege escalation (`src/routes/api/tests/assign/+server.js:22`, `src/routes/api/tests/upload/+server.js:66`).
  - Legacy numeric credentials can persist for dormant accounts until the migration sweep is run; all new signups and resets now require 10+ character passphrases with letters and numbers (`src/lib/credentials.js:1`, `src/routes/api/auth/signup/+server.js:1`, `scripts/migrate-pins.js:1`). Ensure backfill jobs run before launch so no weak secrets remain.

## Cloudflare Local Development Setup Checklist
- [ ] Run `npm install` so SvelteKit, adapter-cloudflare, and local tooling are available before invoking Wrangler builds or migrations.
- [ ] Add Wrangler to the workspace with `npm install -D wrangler` (or pin a version in `package.json`) so `npx wrangler` resolves consistently across machines and CI.
- [ ] Authenticate against the correct Cloudflare account using `npx wrangler login` and confirm access with `npx wrangler whoami`.
- [ ] Create or refresh `wrangler.toml` with `name`, `compatibility_date`, `main = ".svelte-kit/cloudflare/_worker.js"`, `pages_build_output_dir = ".svelte-kit/cloudflare"`, and a `[[d1_databases]]` section binding `DB` and pointing `migrations_dir` to `migrations/`.
- [ ] Provision the dev D1 database via `npx wrangler d1 create law-test-randomizer-dev` and capture the returned `database_id`.
- [ ] Paste the `database_id` (and optional `preview_database_id` for a local-only copy) into the `[[d1_databases]]` entry so the binding resolves as `env.DB` in Workers/Pages.
- [ ] Apply schema changes to the remote database with `npx wrangler d1 migrations apply law-test-randomizer-dev` to align production-like environments with `/migrations`.
- [ ] Mirror the migrations locally with `npx wrangler d1 migrations apply law-test-randomizer-dev --local` so `wrangler pages dev` runs against the same schema.
- [ ] Seed baseline data (teachers, classes, reviewers) using `node scripts/migrate-pins.js` or `npx wrangler d1 execute law-test-randomizer-dev --local --file <seed.sql>` before validating flows.
- [ ] Store secrets required by server hooks in `.dev.vars` (e.g. `SESSION_SECRET=`) so Wrangler injects them the same way as production bindings.
- [ ] Start Cloudflare-aware local development with `npx wrangler pages dev -- npm run dev` and confirm the app can query via `platform.env.DB`.
- [ ] Execute `npx wrangler pages dev -- npm run test:unit -- --run` once to ensure the unit suite passes with the D1 binding in place.

## Security (critical risks)
- **Client-managed SQL with exposed credentials (mitigated 2025-11-07).** SvelteKit no longer exposes the generic `/api/query` and `/api/query-file` proxies; all raw SQL now executes from server routes using the private service token (`src/routes/tests/[id]/+page.server.js:1`, `src/routes/+page.server.js:1`, `src/routes/api/tests/[id]/+server.js:1`, `src/lib/api.js:1`). *Follow-up:* scrub documentation and tooling that referenced the old endpoints and ensure administrators only run migrations through secured server processes.
- **Server-side SQL string building (mitigated 2025-11-13).** Even with the browser proxy removed, server handlers previously composed SQL with string concatenation (`src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`). The shared helper now binds `{ text, values }`, and uploads, signup, attempt answer retrieval, and grading all use parameterised statements (`src/lib/server/db.js:1`, `src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`). Continue auditing remaining admin/reporting endpoints for similar refactors.
- **Cloudflare D1 binding enforcement (addressed 2025-11-15).** The shared DB helper now resolves the Cloudflare Pages/Workers `DB` binding directly, eliminating the bearer-token proxy and the `$lib/server/env` shim (`src/lib/server/db.js:1`, `src/hooks.server.js:1`). *Action:* ensure every environment declares the `DB` binding and update runbooks that previously referenced `BACKEND_SERVICE_TOKEN`.
- **Partial server-side ownership checks.** High-risk teacher routes now resolve identity from the authenticated session via `resolveTeacherId` (`src/lib/server/authGuard.js:1`), covering assignments, uploads, grading, results, teacher test listings, and question loading. Class roster queries also enforce session-derived identity (`src/routes/api/classes/students/+server.js:1`, `src/lib/api.js:218`). Review assignment APIs now derive the teacher from the signed session and reject mismatched identifiers (`src/routes/api/review-assignments/+server.js:1`, `src/routes/api/review-assignments/[id]/+server.js:1`, `src/lib/api.js:1`). Admin tooling still accepts explicit IDs for cross-teacher management. *Action:* extend the session guard across the remaining admin endpoints and stop accepting client-supplied identifiers where escalation isn't intended.
- **Arbitrary SQL console.** The admin page exposes a raw SQL console to any teacher (`src/routes/admin/+page.svelte:159`). Combined with exposed credentials, this is equivalent to full database compromise. *Action:* Remove or heavily restrict this console, limiting it to vetted read-only diagnostics behind admin-only auth.
- **Weak credentials & storage (substantially mitigated).** Auth endpoints hash passphrases, auto-upgrade legacy values, and now enforce brute-force throttling plus http-only cookie sessions (`src/routes/api/auth/login/+server.js:1`, `src/lib/server/loginRateLimit.js:1`, `src/lib/server/session.js:1`, `migrations/013_add_auth_security.sql:1`). Shared validation enforces 10–128 character passphrases with letters and numbers across signup and admin resets, and dormant accounts can be swept with the included migration script (`src/lib/credentials.js:1`, `src/routes/api/admin/teachers/+server.js:1`, `src/routes/api/admin/reviewers/[id]/+server.js:1`, `scripts/migrate-pins.js:1`). *Action:* schedule the migration sweep for inactive accounts and monitor adoption of the new passphrase policy.*
- **Client identity parameters linger.** Teacher dashboards no longer send `teacherId` when uploading, assigning, deleting, grading, or viewing results—the server resolves ownership from the authenticated session (`src/lib/api.js:1`, `src/routes/+page.svelte:1`, `src/routes/api/tests/[id]/questions/+server.js:1`, `src/routes/api/results/teacher/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`). Reviewer/admin tooling still accepts explicit IDs. *Action:* finish removing identity parameters from reviewer and admin APIs so the session stays the sole source of authority.

## Usability
- **Overloaded home dashboard.** All teacher, student, assignment, review, and image workflows live on one giant page with dozens of toggles (`src/routes/+page.svelte:1`). This produces cognitive overload and makes discoverability poor. *Recommendation:* Split flows into focused routes (e.g., “Upload Tests”, “Assign Students”, “Review Submissions”) with guided navigation.
- **High-friction data entry.** Teachers must paste CSV-like text into a textarea (`src/routes/+page.svelte:213`) with limited inline validation or error surfacing. When parsing fails, errors are logged to the console rather than surfaced clearly. *Recommendation:* Provide drag-and-drop CSV upload with real-time validation summaries.
- **Admin workflows lack affordances.** The admin page expects teachers to remember IDs and PINs (`src/routes/admin/+page.svelte:26`) and exposes destructive actions without confirmation beyond `confirm()`. *Recommendation:* Add search, sorting, and explicit confirmation modals with contextual help.
- **Accessibility gaps.** Custom controls lack ARIA labelling and keyboard focus management in several components (e.g., modal toggles in `src/routes/+page.svelte:325`). *Recommendation:* Audit with axe or Lighthouse and add semantic roles/labels.
- **Remediation status.** UX remediation workstream now has stakeholder-approved IA, extraction runbook, CSV component specs, admin safeguard plans, and accessibility/QA checklists. Upload workspace remains live at `/teacher/upload`, and the assignment workspace sprint is queued to execute against the documented plan while the legacy dashboard stays available for fallback.

## Code Quality & Maintainability
- **Monolithic client API.** `src/lib/api.js` carries 600+ lines of mixed concerns (validation, SQL construction, business rules, randomisation). This impairs reuse and review. *Recommendation:* Split into domain-focused modules (tests, attempts, reviews) and push SQL construction server-side.
- **Console noise in server code.** Server load functions emit verbose emoji logging (`src/routes/tests/[id]/+page.server.js:3`) that will flood production logs. *Recommendation:* Replace with structured logging behind a debug flag.
- **Duplicated parsing logic.** CSV parsing is duplicated in both client (`src/routes/+page.svelte:184`) and server (`src/routes/api/tests/upload/+server.js:13`) with slightly diverging behaviour, increasing bug risk. *Recommendation:* Centralise parsing in a shared module.
- **Implicit dependencies.** Several functions require globals like `crypto` and `FormData` (e.g., `src/lib/api.js:454`) which fail in SSR contexts. *Recommendation:* Inject dependencies or guard for environment to avoid brittle runtime errors.

## Performance & Reliability
- **Unbounded data fetches.** Admin dashboards fetch all teachers, tests, and students without pagination (`src/routes/admin/+page.svelte:193`), which will degrade as data grows. *Recommendation:* Add server-side filtering and paging.
- **N+1 image requests.** `processQuestionsWithImagesOptimized` downloads each referenced image individually for every test load (`src/routes/tests/[id]/+page.server.js:44`). Large tests will incur long load times. *Recommendation:* Precompute resolved templates or batch image metadata server-side.
- **No failure handling for remote API.** Proxy routes assume the Railway backend is always up; failures surface as raw error strings in the UI. *Recommendation:* Add retries, timeouts, and user-friendly error states.

## Testing & Tooling
- **Unit tests exist but lack coverage of critical paths.** Tests cover utility functions but not security boundaries or server routes (`src/lib/api.spec.js:1`, `src/lib/user.spec.js:1`). There are no integration tests around login, uploads, or reviewer flows. *Recommendation:* Add Playwright smoke tests for each role and server-side API contract tests.
- **Linting currently fails.** `npm run lint` reports prettier violations across key files (`src/routes/+page.svelte:1`, `src/routes/tests/[id]/+page.server.js:1`). *Recommendation:* Enforce formatting in CI to catch drift.
- **No CI guidance.** README still mirrors the Svelte starter and omits auth/secrets setup, making onboarding uncertain (`README.md:1`). *Recommendation:* Document environment variables, migrations, and test data setup.

## Recommended Next Steps
1. **Harden server-side SQL execution.** Add parameter binding to `runQuery`/`runQueryFile`, refactor the highest-risk endpoints away from string interpolation, and add tests to guard against regression. *Status:* Helper now binds `{ text, values }` payloads and the major routes (cascade deletes, uploads, signup, attempt answers, grading) have been migrated (`src/lib/server/db.js:1`, `src/routes/api/tests/[id]/+server.js:1`, `src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`). Continue auditing ancillary admin/reporting SQL and add automated coverage for the new bindings.
2. **Operationalise the new passphrase policy.** Run the credential migration sweep for dormant accounts, prompt users to rotate weak secrets, and finish removing any client-supplied identifiers from residual admin tooling.
3. **Refactor the UI into dedicated flows.** Break the monolithic dashboard apart, prioritising clarity for teachers, students, and reviewers.
   - Draft information architecture for Upload, Assignment, Attempt Management, Review, and Admin utilities. *(In progress – first-pass IA documented, navigation shell shipped at `/teacher/upload`, stakeholder sign-off pending.)*
   - Carve out teacher upload/assignment routes first, introducing shared CSV import components with inline validation summaries.
   - Promote the assignment workspace spec and migrate the shared stores required for `/teacher/assign`.
   - Layer in admin safeguards (search, confirmation modals) and accessibility reviews as each new page ships.
4. **Stabilise tooling.** Fix lint/format drift, add CI, and expand automated tests around the highest-risk paths.
5. **Plan a security hardening sprint.** Run threat modelling, add monitoring, and conduct penetration testing before onboarding more users.

## Remediation Log
- 2025-11-15 — Server data access now uses the Cloudflare Pages `DB` binding directly (no bearer token proxy). `$lib/server/env` was removed, hooks attach the D1 binding to `locals`, and the shared helper executes statements against the binding (`src/lib/server/db.js:1`, `src/hooks.server.js:1`). Documentation and tooling were refreshed to reference D1 (`README.md:86`, `docs/testing.md:1`, `docs/credential-hardening.md:1`, `scripts/migrate-pins.js:1`).
- 2025-11-04 — Teacher test assignment, activation, grading, and student/teacher results now flow through dedicated server endpoints with ownership checks (`src/routes/api/tests/assign/+server.js:1`, `src/routes/api/tests/active/+server.js:1`, `src/routes/api/results/teacher/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`, `src/routes/api/results/student/+server.js:1`). Client helpers updated to hit these endpoints and pass teacher context (`src/lib/api.js:94`, `src/lib/api.js:105`, `src/lib/api.js:140`, `src/lib/api.js:155`, `src/lib/api.js:172`, `src/lib/api.js:202`), and the dashboard consumes the new response shapes (`src/routes/+page.svelte:705`). Unit tests adjusted to cover the new REST calls (`src/lib/api.spec.js:88`).
- 2025-11-04 — Removed the admin "Database Query Panel" to stop teachers from executing arbitrary SQL from the browser (`src/routes/admin/+page.svelte:1`). Risk mitigated while we replace remaining admin workflows with scoped server endpoints.
- 2025-11-04 — Migrated admin teacher/student/reviewer flows onto `/api/admin` server routes, replacing client-originated SQL (`src/routes/api/admin/teachers/+server.js:1`, `src/routes/api/admin/students/+server.js:1`, `src/routes/api/admin/tests/copy/+server.js:1`, `src/routes/api/admin/classes/+server.js:1`, `src/routes/api/admin/reviewers/+server.js:1`, `src/lib/api.js:643`). Admin UI now consumes REST payloads and refreshes lists without exposing the bearer token (`src/routes/admin/+page.svelte:1`), and unit coverage guards the new endpoints (`src/lib/api.spec.js:166`).
- 2025-11-04 — Image library CRUD moved to protected server endpoints with teacher-scoped headers (`src/routes/api/admin/images/+server.js:1`, `src/routes/api/admin/images/[id]/+server.js:1`). Client utilities and ImageManager now use the REST API (`src/lib/api.js:818`, `src/lib/components/ImageManager.svelte:1`, `src/routes/admin/+page.svelte:326`), closing the last major direct SQL pathway in the admin UI.
- 2025-11-04 — Reviewer invite management now runs through server routes (`src/routes/api/admin/reviewer-invitations/+server.js:1`, `src/routes/api/reviewers/+server.js:1`); the client fetches active reviewers and invitations via REST (`src/lib/api.js:681`, `src/lib/api.js:749`) and ReviewAssignment loads the new payloads (`src/lib/components/ReviewAssignment.svelte:19`). Added tests to cover the new fetch contracts (`src/lib/api.spec.js:200`).
- 2025-11-04 — Review assignment creation, dashboards, and feedback submission now rely on REST endpoints (`src/routes/api/review-assignments/+server.js:1`, `src/routes/api/reviewer-assignments/+server.js:1`, `src/routes/api/reviewer-reviews/[id]/+server.js:1`, `src/routes/api/review-assignments/[id]/results/+server.js:1`). Teacher and reviewer clients consume the new responses (`src/lib/api.js:1130`, `src/routes/+page.svelte:500`, `src/lib/components/ReviewerDashboard.svelte:1`), with Vitest coverage locking in the request shapes (`src/lib/api.spec.js:230`).
- 2025-11-04 — Teacher test/question management now uses scoped endpoints for class rosters, invites, active tests, and inline question editing (`src/routes/api/classes/students/+server.js:1`, `src/routes/api/classes/join/+server.js:1`, `src/routes/api/tests/active/+server.js:1`, `src/routes/api/tests/[id]/questions/+server.js:1`, `src/routes/api/questions/[id]/+server.js:1`, `src/routes/api/choices/[id]/+server.js:1`, `src/routes/api/tests/teacher/[id]/+server.js:1`). The dashboard and editor call these APIs (`src/routes/+page.svelte:440`, `src/routes/tests/[id]/+page.svelte:112`), and unit tests cover the new contracts (`src/lib/api.spec.js:240`).
- 2025-11-04 — Public signup and login now flow exclusively through `/api/auth` with invitation handling, removing client-side SQL for account creation (`src/routes/api/auth/signup/+server.js:1`, `src/routes/api/auth/login/+server.js:1`). Client helpers and the login page submit to the REST API (`src/lib/api.js:520`, `src/routes/login/+page.svelte:1`), and new Vitest cases assert the payloads (`src/lib/api.spec.js:360`).
- 2025-11-04 — Student attempt lifecycle moved to server routes for start/save/submit, preventing tampering with SQL (`src/routes/api/attempts/start/+server.js:1`, `src/routes/api/attempts/[id]/answer/+server.js:1`, `src/routes/api/attempts/[id]/submit/+server.js:1`). Client code now hits these endpoints (`src/lib/api.js:380`, `src/routes/tests/[id]/+page.svelte:58`), with unit coverage verifying the new contracts (`src/lib/api.spec.js:180`).
- 2025-11-05 — Added `auth_sessions` and `auth_login_limits` tables to support server-issued sessions and lockouts (`migrations/013_add_auth_security.sql:1`). Login flow now sets signed http-only cookies, records session usage, and clears failures on success (`src/routes/api/auth/login/+server.js:1`, `src/lib/server/session.js:1`). Logout endpoint and hooks clear cookies and tear down server state (`src/routes/api/auth/logout/+server.js:1`, `src/hooks.server.js:1`).
- 2025-11-06 — Removed the deprecated `PUBLIC_PASSPHRASE` fallback so deployments fail fast without `BACKEND_SERVICE_TOKEN` (`src/lib/server/env.js:1`). Introduced `resolveTeacherId` and updated teacher-sensitive routes to derive identity from authenticated sessions rather than request bodies (`src/lib/server/authGuard.js:1`, `src/routes/api/tests/assign/+server.js:1`, `src/routes/api/tests/upload/+server.js:1`, `src/routes/api/tests/[id]/questions/+server.js:1`, `src/routes/api/tests/teacher/[id]/+server.js:1`, `src/routes/api/results/teacher/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`).
- 2025-11-07 — Eliminated the `/api/query` and `/api/query-file` proxies, routing SQL exclusively through authenticated server code (`src/routes/tests/[id]/+page.server.js:1`, `src/routes/+page.server.js:1`, `src/routes/api/tests/[id]/+server.js:1`). The client SDK now calls the new cascade delete endpoint and no longer exposes raw SQL helpers (`src/lib/api.js:1`, `src/lib/api.spec.js:1`).
- 2025-11-08 — Class roster API now rejects client-supplied teacher identifiers and relies on the signed session; the frontend helper and dashboard were updated accordingly (`src/routes/api/classes/students/+server.js:1`, `src/lib/api.js:218`, `src/routes/+page.svelte:457`, `src/lib/api.spec.js:387`).
- 2025-11-09 — Teacher dashboards dropped the remaining `teacherId` payloads for uploads, assignments, deletions, question fetch, grading, and results. Server endpoints now tolerate missing IDs and resolve ownership from the authenticated session, and the client SDK/tests reflect the new contract (`src/lib/api.js:1`, `src/lib/api.spec.js:1`, `src/routes/+page.svelte:1`, `src/lib/components/ReviewAssignment.svelte:1`, `src/routes/api/results/teacher/+server.js:1`, `src/routes/api/tests/[id]/questions/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`).
- 2025-11-10 — Review assignment endpoints now require the authenticated teacher session and ignore client-supplied identifiers; reviewer workflows call the secured API without `teacherId` payloads (`src/routes/api/review-assignments/+server.js:1`, `src/routes/api/review-assignments/[id]/+server.js:1`, `src/lib/api.js:1`, `src/routes/+page.svelte:1`, `src/lib/components/ReviewAssignment.svelte:1`, `src/lib/api.spec.js:1`).
- 2025-11-11 — Kicked off SQL parameterisation sprint: reviewed `src/lib/server/db.js` and enumerated string-built statements in upload, deletion, signup, and grading handlers (`src/routes/api/tests/upload/+server.js:1`, `src/routes/api/tests/[id]/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`). Drafting a `{ text, values }` signature for the helper so we can migrate one endpoint at a time and add regression tests before flipping the rest.
- 2025-11-12 — Added `{ text, values }` parameter binding to `runQuery` and migrated the `/api/tests/[id]` cascade delete flow to the new helper (`src/lib/server/db.js:1`, `src/routes/api/tests/[id]/+server.js:1`). Upload, signup, and grading routes still build SQL manually and remain on the remediation list.
- 2025-11-13 — Finished migrating high-risk endpoints to the bound helper: uploads, signup, attempt answer retrieval, and grading now call `runQuery` with `{ text, values }`, removing manual SQL concatenation from those flows (`src/routes/api/tests/upload/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/api/attempts/[attemptId]/answers/+server.js:1`, `src/routes/api/attempts/answers/grade/+server.js:1`). Added progress notes to track remaining low-risk admin queries.
- 2025-11-14 — Enforced a strong passphrase policy across signup, login, and admin resets with shared validation and UI updates (`src/lib/credentials.js:1`, `src/routes/api/auth/login/+server.js:1`, `src/routes/api/auth/signup/+server.js:1`, `src/routes/admin/+page.svelte:1`, `src/routes/login/+page.svelte:1`). Updated docs and tooling to sweep legacy PINs via the credential migration script (`scripts/migrate-pins.js:1`, `docs/credential-hardening.md:1`, `README.md:1`, `checklists/remediation-progress.md:1`).
- 2025-11-15 — Initiated App UX restructure planning: catalogued dashboard flows, prioritised usability pain points, and defined upcoming tasks for navigation redesign, CSV improvements, admin guardrails, and accessibility validation (`checklists/remediation-progress.md:1`).
- 2025-11-16 — Drafted initial navigation IA for the App UX workstream, outlining role-based pillars and teacher sidebar structure, and documented follow-up review/checklist tasks (`checklists/remediation-progress.md:1`).
- 2025-11-17 — Secured stakeholder sign-off on the App UX plan, documented the extraction/runbook, finalised CSV component design requirements, catalogued admin safeguard UX needs, and published accessibility/QA checklists to guide upcoming implementation (`checklists/remediation-progress.md:1`).

## Appendix: Commands Run
- `npm run lint` (fails: prettier issues in 12 files)
- `npm run test:unit -- --run` (passes: 4 files, 55 tests)
